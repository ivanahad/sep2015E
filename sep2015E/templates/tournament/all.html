{% extends 'staff_template.html' %}

{% block title %}
<title>Charles de Lorraine - Staff page</title>
{% endblock %}

{% block nav %}
	<li><a href="{% url "staff.views.home" %}">Acceuil</a></li>
	<li><a href="{% url "staff.views.players" %}">Joueurs</a></li>
	<li><a href="{% url "staff.views.courts" %}">Terrains</a></li>
	<li><a href="{% url "tournament.views.all" %}">Tournois</a></li>
	<li><a href="https://github.com/ivanahad/sep2015E/wiki">Wiki</a></li>
	<li><a href="{% url "staff.views.logout_staff" %}">Logout</a></li>
{% endblock %}

{% block content %}
<div class="row">
	<div class="box">
		<div class="col-lg-12">
			<!-- DISPLAY LIST OF TOURNAMENTS -->
			<hr>
			<h2 class="intro-text text-center">Liste des
				<strong>tournois actuels</strong>
			</h2>
			<hr>

			<div>
				{% for t in tournaments %}
        <a href="{% url "tournament.views.tournamentStaff" t.tournament.pk %}"
           class="tournament-a-block">
          <div class="panel panel-default panel-body tournament-a-block">
            <p> <b>Tournoi:</b> {{ t.tournament.name }} </p>
            <p> <b>Catégorie:</b> {{ t.tournament.category }} </p>
            <p> <b>Nombre de paires enregistrées:</b> {{ t.pair_count }} </p>
            {% if t.tournament.is_open %}
            <p> <b>Nombre de joueurs solo:</b> {{ t.solo_count }} </p>
            {% endif %}
            <p> <b>Status:</b> {{ t.status }} </p>
          </div>
        </a>
				{% endfor %}
			</div>


			<!-- CREATE A NEW TOURNAMENT -->

      {% if user.is_staff %} <!-- enable this section if user is staff -->
      <div class="panel">
        <div class="panel-heading">
          <h3 class="panel-title">Créer un nouveau tournoi</h3>
        </div>

        <div class="panel-body">
          <form action="{% url "tournament.views.all" %}" method="post">
            {% csrf_token %}
            {{ new_tournament.non_field_errors }}
						<div class="row field">
							<div class="col-sm-4">
								<label for="id_name"> Nom :</label>
							</div>
							<div class="col-sm-4">
								{{ new_tournament.name }}
							</div>
							<div class="col-sm-4 required">
								{{ new_tournament.name.errors }}
							</div>
						</div>
						<div class="row field">
							<div class="col-sm-4">
								<label for="id_category"> Catégories :</label>
							</div>
							<div class="col-sm-4">
								{{ new_tournament.category }}
							</div>
							<div class="col-sm-4 required">
								{{ new_tournament.category.errors }}
							</div>
						</div>
						<div class="row field">
							<div class="col-sm-4">
								<label for="id_pool_size"> Joueurs par pool :</label>
							</div>
							<div class="col-sm-4">
								{{ new_tournament.pool_size }}
							</div>
							<div class="col-sm-4 required">
								{{ new_tournament.pool_size.errors }}
							</div>
						</div>
						<div class="row field">
							<div class="col-sm-4">
								<label for="id_mixte"> Mixte :</label>
							</div>
							<div class="col-sm-4">
								{{ new_tournament.mixte }}
							</div>
							<div class="col-sm-4 required">
								{{ new_tournament.mixte.errors }}
							</div>
						</div>
            <input type="submit" value="Créer" name="create_tournament" />
          </form>
        </div>

      </div>
      {% endif %}


		</div>
	</div>
</div>

{% endblock %}
